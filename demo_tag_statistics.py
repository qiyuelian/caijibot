#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
标签统计功能演示脚本
展示如何使用新的标签统计功能
"""

def demo_tag_statistics_usage():
    """演示标签统计功能的使用方法"""
    
    print("🏷️ 标签统计功能使用指南")
    print("=" * 50)
    
    print("\n📊 1. 查看所有标签的统计摘要")
    print("命令: /tag_stats")
    print("功能: 显示所有活跃标签的媒体数量统计")
    print("示例输出:")
    print("""
🏷️ **标签媒体统计摘要**

📊 **总体统计**:
• 活跃标签数: 15
• 总视频数: 1,234
• 总图片数: 2,567
• 总音频数: 89
• 总文档数: 156

🔝 **热门标签** (前10个):
1. **搞笑视频**
   🎬 456 📸 123 🎵 12 📄 5
   💾 2.3 GB

2. **猫咪**
   🎬 234 📸 567 🎵 0 📄 2
   💾 1.8 GB
    """)
    
    print("\n🎯 2. 查看特定标签的详细统计")
    print("命令: /tag_stats <标签名>")
    print("示例: /tag_stats 搞笑视频")
    print("功能: 显示指定标签下各种媒体类型的详细统计")
    print("示例输出:")
    print("""
🏷️ **标签详细统计**: 搞笑视频

📝 **标签信息**:
• 描述: 有趣的搞笑视频内容
• 颜色: #FF5722
• 总文件数: 596
• 总大小: 2.34 GB

📊 **媒体类型分布**:
🎬 视频: 456 个 (2.1 GB)
📸 图片: 123 个 (156 MB)
🎵 音频: 12 个 (45 MB)
📄 文档: 5 个 (12 MB)

📈 **平均文件大小**:
• 视频: 4.8 MB
• 图片: 1.3 MB
• 音频: 3.8 MB
• 文档: 2.4 MB
    """)
    
    print("\n🎬 3. 查看指定媒体类型的标签分布")
    print("命令: /media_by_tag <媒体类型>")
    print("支持的媒体类型: video, image, audio, document")
    print("示例: /media_by_tag video")
    print("功能: 显示指定媒体类型在各标签下的分布情况")
    print("示例输出:")
    print("""
🎬 **Video 标签分布统计**

📊 **总计**: 1,234 个video

🏷️ **标签分布** (前15个):
1. **搞笑视频**: 456 个 (37.0%)
2. **猫咪**: 234 个 (19.0%)
3. **音乐MV**: 189 个 (15.3%)
4. **教程**: 123 个 (10.0%)
5. **游戏**: 98 个 (7.9%)
    """)
    
    print("\n💡 4. 实际使用场景")
    print("=" * 30)
    
    scenarios = [
        {
            "场景": "内容管理员想了解采集情况",
            "使用": "/tag_stats",
            "目的": "快速了解各标签下的内容数量和存储占用"
        },
        {
            "场景": "想查看某个特定标签的详细信息",
            "使用": "/tag_stats 猫咪视频",
            "目的": "了解'猫咪视频'标签下有多少视频、图片等"
        },
        {
            "场景": "想了解视频内容的标签分布",
            "使用": "/media_by_tag video",
            "目的": "看看视频主要集中在哪些标签下"
        },
        {
            "场景": "想了解图片内容的标签分布",
            "使用": "/media_by_tag image", 
            "目的": "分析图片内容的分类情况"
        }
    ]
    
    for i, scenario in enumerate(scenarios, 1):
        print(f"\n{i}. {scenario['场景']}")
        print(f"   使用命令: {scenario['使用']}")
        print(f"   目的: {scenario['目的']}")
    
    print("\n🔧 5. 技术特性")
    print("=" * 20)
    
    features = [
        "✅ 实时统计 - 基于数据库实时计算",
        "✅ 多维度分析 - 按标签、媒体类型、时间等维度",
        "✅ 详细信息 - 包含文件数量、大小、平均值等",
        "✅ 可视化展示 - 清晰的表格和百分比显示",
        "✅ 交互式操作 - 支持按钮点击查看更多详情",
        "✅ 高性能查询 - 优化的数据库查询，快速响应"
    ]
    
    for feature in features:
        print(f"  {feature}")
    
    print("\n🎯 6. 使用建议")
    print("=" * 20)
    
    tips = [
        "定期使用 /tag_stats 了解采集进度",
        "使用 /media_by_tag 分析内容分布是否合理",
        "对于重要标签，使用详细统计了解具体情况",
        "结合存储统计 (/storage) 管理磁盘空间",
        "利用统计数据优化标签分类规则"
    ]
    
    for i, tip in enumerate(tips, 1):
        print(f"  {i}. {tip}")
    
    print("\n🚀 开始使用")
    print("=" * 15)
    print("现在就可以在机器人中使用这些命令了！")
    print("输入 /help 查看所有可用命令")
    print("输入 /tag_stats 开始探索你的标签统计数据")


if __name__ == "__main__":
    demo_tag_statistics_usage()
